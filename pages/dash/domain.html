<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiredShield - Domain Management</title>
</head>
<style>
    * {
        box-sizing: border-box;
    }

    body {
        background-color: #121212;
        color: #ffffff;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    .header {
        display: flex;
        align-items: center;
        background: #1e1e1e;
        padding: 20px;
    }

    .header img {
        margin-right: 10px;
    }

    .header h1 {
        font-size: 24px;
        margin: 0;
    }

    .main {
        padding: 20px;
    }

    .record-list table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        background-color: #1e1e1e;
        border: 1px solid #333333;
    }

    .record-list th,
    .record-list td {
        padding: 10px;
        text-align: left;
        border: 1px solid #333333;
    }

    .record-list th {
        background-color: #333333;
    }

    .record-list tr:hover {
        background-color: #2a2a2a;
    }

    .actions button {
        background-color: #0077ff;
        color: white;
        border: none;
        padding: 8px 12px;
        cursor: pointer;
        border-radius: 4px;
        transition: background-color 0.2s ease-in-out;
    }

    .actions button:hover {
        background-color: #005ecc;
    }

    .add-record-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #222222;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #444444;
        display: none;
        z-index: 1000;
    }

    .add-record-modal form {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .add-record-modal input,
    .add-record-modal select {
        padding: 8px;
        border: 1px solid #444444;
        border-radius: 4px;
        background-color: #1e1e1e;
        color: #ffffff;
    }

    .add-record-modal button {
        align-self: flex-end;
        background-color: #0077ff;
    }

    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        z-index: 999;
    }
</style>

<body>
    <div class="header">
        <img src="data:image/svg+xml;base64,..." alt="WiredShield Logo" width="64">
        <h1>WiredShield - Domain Management</h1>
    </div>
    <div class="main">
        <div class="actions">
            <button onclick="openAddRecordModal()">+ Add Record</button>
        </div>
        <div class="record-list">
            <table id="record-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Domain</th>
                        <th>Value</th>
                        <th>Priority</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="add-record-modal" id="addRecordModal">
        <form id="addRecordForm">
            <h3>Add DNS Record</h3>
            <select name="type" required>
                <option value="A">A</option>
                <option value="AAAA">AAAA</option>
                <option value="NS">NS</option>
                <option value="TXT">TXT</option>
                <option value="MX">MX</option>
                <option value="SOA">SOA</option>
                <option value="CAA">CAA</option>
                <option value="SRV">SRV</option>
                <option value="CNAME">CNAME</option>
            </select>
            <input type="text" name="domain" placeholder="Domain" required>
            <input type="text" name="value" placeholder="Value" required>
            <input type="number" name="priority" placeholder="Priority (for MX only)" min="0">
            <button type="submit">Add Record</button>
            <button type="button" onclick="closeAddRecordModal()">Cancel</button>
        </form>
    </div>
    <div class="overlay" id="overlay" onclick="closeAddRecordModal()"></div>

    <script>
        const domain = window.location.pathname.split("/").pop();
        const overlay = document.getElementById('overlay');
        const addRecordModal = document.getElementById('addRecordModal');
        const addRecordForm = document.getElementById('addRecordForm');

        function openAddRecordModal() {
            overlay.style.display = 'block';
            addRecordModal.style.display = 'block';
        }

        function closeAddRecordModal() {
            overlay.style.display = 'none';
            addRecordModal.style.display = 'none';
        }

        function fetchData() {
            fetch(`https://dash.as214428.net/.wiredshield/api/domains/records?domain=${domain}`)
                .then(response => response.json())
                .then(data => {
                    const tbody = document.querySelector('#record-table tbody');
                    tbody.innerHTML = '';
                    data.forEach(record => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${record.type}</td>
                            <td>${record.name}</td>
                            <td>${record.value}</td>
                            <td>${record.priority || ''}</td>
                            <td>
                                <button onclick="deleteRecord(${record.id})">Delete</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                });
        }

        function deleteRecord(id) {
            fetch(`https://dash.as214428.net/.wiredshield/api/domains/records/${id}`, {
                method: 'DELETE'
            }).then(() => fetchData());
        }

        addRecordForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const formData = new FormData(addRecordForm);
            fetch(`https://dash.as214428.net/.wiredshield/api/domains/records`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(Object.fromEntries(formData))
            }).then(() => {
                closeAddRecordModal();
                fetchData();
            });
        });

        fetchData();
    </script>
</body>

</html>